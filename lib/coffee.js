// Generated by CoffeeScript 1.9.3
(function() {
  var techAnimation;

  $(function() {
    var $container, $doc, $techAnim;
    $techAnim = $('.tech-anim');
    if ($techAnim.length > 0) {
      $doc = $(document);
      window.techAnim = new techAnimation();
      $container = $('.slides');
      return $container.fullpage({
        verticalCentered: false,
        css3: true,
        navigation: true,
        navigationPosition: 'left',
        navigationTooltips: ['', 'Infrastructure', 'Gateway', 'Load Balancing', 'Application', 'Bastion', 'Database', 'Scale'],
        showActiveTooltip: true,
        afterLoad: function(anchorLink, index) {
          return techAnim.play[index - 1].call(this);
        },
        onLeave: function(index, nextIndex, direction) {
          techAnim.stopIntro();
          return techAnim.leave[index - 1].call(this);
        },
        afterRender: function() {
          return $container.css('opacity', 1);
        }
      });
    }
  });

  techAnimation = (function() {
    var intro, leaveApp, leaveBastion, leaveDatabase, leaveGateway, leaveInfrastructure, leaveIntro, leaveNetwork, leaveScaling, playApp, playBastion, playDatabase, playIntro, playScaling;

    function techAnimation() {}

    intro = {
      visible: false,
      state: false,
      play: false,
      leave: false,
      end: false
    };

    playIntro = function() {
      if (!intro.play) {
        return animate({
          el: '.console',
          easing: 'easeOutCirc',
          opacity: [0, 1],
          translateY: [1000, 0],
          duration: 500,
          delay: 100,
          begin: function() {
            return intro.play = true;
          },
          complete: function() {
            return intro.end = true;
          }
        });
      }
    };

    playApp = function() {
      return $('.app').removeClass('faded');
    };

    playBastion = function() {
      $('.ssh').removeClass('faded');
      return $('.bastion').removeClass('faded');
    };

    playDatabase = function() {
      return $('.database').removeClass('faded');
    };

    playScaling = function() {
      $('.load-balancer, .app, .bastion').removeClass('faded');
      window.network.runHalf();
      return setTimeout((function() {
        return window.network.runHalf2();
      }), 3000);
    };

    techAnimation.prototype.stopIntro = function() {
      return animate.stop('.console');
    };

    leaveIntro = function() {
      if (!intro.leave) {
        return animate({
          el: '.console',
          easing: 'easeOutQuad',
          translateY: [0, 50],
          opacity: [1, 0],
          duration: 400,
          begin: function() {
            return intro.leave = true;
          }
        });
      }
    };

    leaveInfrastructure = function() {
      return $('#infrastructure .copy').fadeOut(150);
    };

    leaveGateway = function() {
      return $('#gateway .copy').fadeOut(150);
    };

    leaveNetwork = function() {
      $('#network .copy').fadeOut(150);
      $('.public .http').addClass('faded');
      $('.load-balancer').addClass('faded');
      return window.network.stop();
    };

    leaveApp = function() {
      $('#code .copy').fadeOut(150);
      $('.app').addClass('faded');
      return window.network.runSSH();
    };

    leaveBastion = function() {
      $('#bastion .copy').fadeOut(150);
      $('.bastion').addClass('faded');
      $('.ssh').addClass('faded');
      return window.network.stop();
    };

    leaveDatabase = function() {
      return $('#database .copy').fadeOut(150);
    };

    leaveScaling = function() {};

    techAnimation.prototype.play = [animIntro, animInfrastructure, animGateway, animNetwork, playApp, playBastion, playDatabase, playScaling];

    techAnimation.prototype.leave = [leaveIntro, leaveInfrastructure, leaveGateway, leaveNetwork, leaveApp, leaveBastion, leaveDatabase, leaveScaling];

    return techAnimation;

  })();

}).call(this);
